import{f as ar,i as Kt}from"./index-CeuELFCM.js";var Te={exports:{}},nt;function ir(){if(nt)return Te.exports;nt=1;var s=typeof Reflect=="object"?Reflect:null,o=s&&typeof s.apply=="function"?s.apply:function(P,L,A){return Function.prototype.apply.call(P,L,A)},r;s&&typeof s.ownKeys=="function"?r=s.ownKeys:Object.getOwnPropertySymbols?r=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:r=function(P){return Object.getOwnPropertyNames(P)};function t(T){console&&console.warn&&console.warn(T)}var e=Number.isNaN||function(P){return P!==P};function n(){n.init.call(this)}Te.exports=n,Te.exports.once=J,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function c(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number"||T<0||e(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");a=T}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||e(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function l(T){return T._maxListeners===void 0?n.defaultMaxListeners:T._maxListeners}n.prototype.getMaxListeners=function(){return l(this)},n.prototype.emit=function(P){for(var L=[],A=1;A<arguments.length;A++)L.push(arguments[A]);var F=P==="error",$=this._events;if($!==void 0)F=F&&$.error===void 0;else if(!F)return!1;if(F){var G;if(L.length>0&&(G=L[0]),G instanceof Error)throw G;var m=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw m.context=G,m}var w=$[P];if(w===void 0)return!1;if(typeof w=="function")o(w,this,L);else for(var v=w.length,x=B(w,v),A=0;A<v;++A)o(x[A],this,L);return!0};function b(T,P,L,A){var F,$,G;if(c(L),$=T._events,$===void 0?($=T._events=Object.create(null),T._eventsCount=0):($.newListener!==void 0&&(T.emit("newListener",P,L.listener?L.listener:L),$=T._events),G=$[P]),G===void 0)G=$[P]=L,++T._eventsCount;else if(typeof G=="function"?G=$[P]=A?[L,G]:[G,L]:A?G.unshift(L):G.push(L),F=l(T),F>0&&G.length>F&&!G.warned){G.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=T,m.type=P,m.count=G.length,t(m)}return T}n.prototype.addListener=function(P,L){return b(this,P,L,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(P,L){return b(this,P,L,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(T,P,L){var A={fired:!1,wrapFn:void 0,target:T,type:P,listener:L},F=i.bind(A);return F.listener=L,A.wrapFn=F,F}n.prototype.once=function(P,L){return c(L),this.on(P,_(this,P,L)),this},n.prototype.prependOnceListener=function(P,L){return c(L),this.prependListener(P,_(this,P,L)),this},n.prototype.removeListener=function(P,L){var A,F,$,G,m;if(c(L),F=this._events,F===void 0)return this;if(A=F[P],A===void 0)return this;if(A===L||A.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete F[P],F.removeListener&&this.emit("removeListener",P,A.listener||L));else if(typeof A!="function"){for($=-1,G=A.length-1;G>=0;G--)if(A[G]===L||A[G].listener===L){m=A[G].listener,$=G;break}if($<0)return this;$===0?A.shift():R(A,$),A.length===1&&(F[P]=A[0]),F.removeListener!==void 0&&this.emit("removeListener",P,m||L)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(P){var L,A,F;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[P]),this;if(arguments.length===0){var $=Object.keys(A),G;for(F=0;F<$.length;++F)G=$[F],G!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=A[P],typeof L=="function")this.removeListener(P,L);else if(L!==void 0)for(F=L.length-1;F>=0;F--)this.removeListener(P,L[F]);return this};function j(T,P,L){var A=T._events;if(A===void 0)return[];var F=A[P];return F===void 0?[]:typeof F=="function"?L?[F.listener||F]:[F]:L?U(F):B(F,F.length)}n.prototype.listeners=function(P){return j(this,P,!0)},n.prototype.rawListeners=function(P){return j(this,P,!1)},n.listenerCount=function(T,P){return typeof T.listenerCount=="function"?T.listenerCount(P):N.call(T,P)},n.prototype.listenerCount=N;function N(T){var P=this._events;if(P!==void 0){var L=P[T];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function B(T,P){for(var L=new Array(P),A=0;A<P;++A)L[A]=T[A];return L}function R(T,P){for(;P+1<T.length;P++)T[P]=T[P+1];T.pop()}function U(T){for(var P=new Array(T.length),L=0;L<P.length;++L)P[L]=T[L].listener||T[L];return P}function J(T,P){return new Promise(function(L,A){function F(G){T.removeListener(P,$),A(G)}function $(){typeof T.removeListener=="function"&&T.removeListener("error",F),L([].slice.call(arguments))}q(T,P,$,{once:!0}),P!=="error"&&M(T,F,{once:!0})})}function M(T,P,L){typeof T.on=="function"&&q(T,"error",P,L)}function q(T,P,L,A){if(typeof T.on=="function")A.once?T.once(P,L):T.on(P,L);else if(typeof T.addEventListener=="function")T.addEventListener(P,function F($){A.once&&T.removeEventListener(P,F),L($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Te.exports}var or=ir();function at(s,o,r){try{Reflect.apply(s,o,r)}catch(t){setTimeout(()=>{throw t})}}function sr(s){const o=s.length,r=new Array(o);for(let t=0;t<o;t+=1)r[t]=s[t];return r}class ur extends or.EventEmitter{emit(o,...r){let t=o==="error";const e=this._events;if(e!==void 0)t=t&&e.error===void 0;else if(!t)return!1;if(t){let a;if(r.length>0&&([a]=r),a instanceof Error)throw a;const c=new Error(`Unhandled error.${a?` (${a.message})`:""}`);throw c.context=a,c}const n=e[o];if(n===void 0)return!1;if(typeof n=="function")at(n,this,r);else{const a=n.length,c=sr(n);for(let l=0;l<a;l+=1)at(c[l],this,r)}return!0}}var se,Mr=((se={})[se.web=1]="web",se[se.android=2]="android",se[se.ios=3]="ios",se);function cr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var o=16*Math.random()|0;return(s=="x"?o:3&o|8).toString(16)})}function it(s){switch(s){case"production":return{wepinWebview:"https://v1-widget.wepin.io",sdkBackend:"https://sdk.wepin.io/v1",wallet:"https://app.wepin.io"};case"test":return{wepinWebview:"https://stage-v1-widget.wepin.io",sdkBackend:"https://stage-sdk.wepin.io/v1",wallet:"https://stage-app.wepin.io"};case"development":return{wepinWebview:"https://dev-v1-widget.wepin.io",sdkBackend:"https://dev-sdk.wepin.io/v1",wallet:"https://dev-app.wepin.io"};case"local":return{wepinWebview:"https://local-widget.wepin.io",sdkBackend:"https://local-sdk.wepin.io/v1",wallet:"https://local-app.wepin.io"};default:throw Error("Utils.getUrls: invalid mode")}}function ot(s){if(s.slice(0,8)==="ak_live_")return"production";if(s.slice(0,8)==="ak_test_")return"test";if(s.slice(0,7)==="ak_dev_")return"development";if(s.slice(0,13)==="local_ak_dev_")return"local";throw Error("Wepin.getModeByAppKey: Invalid appKey:"+s)}var st=function(s){if((s===void 0?"undefined":s&&typeof Symbol<"u"&&s.constructor===Symbol?"symbol":typeof s)!="object"||s===null)return s;if(Array.isArray(s))return s.map(st);var o={},r=!0,t=!1,e=void 0;try{for(var n,a=Object.keys(s)[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var c=n.value;o[c]=st(s[c])}}catch(l){t=!0,e=l}finally{try{r||a.return==null||a.return()}finally{if(t)throw e}}return o};function Br(s,o,r){return{header:{response_from:"web",response_to:"wepin_widget",id:s.header.id},body:{command:s.body.command,state:o,data:r}}}function fr(s){var o;return(s==null||(o=s.header)===null||o===void 0?void 0:o.request_from)==="wepin_widget"}function lr(s){var o;return(s==null||(o=s.header)===null||o===void 0?void 0:o.response_from)==="wepin_widget"}function ut(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}var Kr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),ut(this,"eventEmitter",new ur),ut(this,"checkValidEvent",function(){return!0}),r?.checkValidEvent&&(this.checkValidEvent=r.checkValidEvent)}return s=[{key:"getEventListenerFunction",value:function(){var r=this;return function(t){r.checkValidEvent(t)&&Object.prototype.hasOwnProperty.call(t.data,"header")&&Object.prototype.hasOwnProperty.call(t.data,"body")&&r.handleMessage(t.data)}}},{key:"setCheckValidEventFunction",value:function(r){this.checkValidEvent=r}},{key:"addRequestHandler",value:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(e){this.eventEmitter.once("request"+r,t);return}this.eventEmitter.addListener("request"+r,t)}},{key:"removeRequestHandler",value:function(r,t){this.eventEmitter.removeListener("request"+r,t)}},{key:"addResponseHandler",value:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(e){this.eventEmitter.once("response"+r,t);return}this.eventEmitter.addListener("response"+r,t)}},{key:"removeResponseHandler",value:function(r,t){this.eventEmitter.removeListener("response"+r,t)}},{key:"addGlobalHandler",value:function(r,t){this.eventEmitter.addListener(r,t)}},{key:"removeGlobalHandler",value:function(r,t){this.eventEmitter.removeListener(r,t)}},{key:"handleMessage",value:function(r){fr(r)?(this.eventEmitter.emit("pre_request",r),this.eventEmitter.emit("request"+r.body.command,r),this.eventEmitter.emit("post_request",r)):lr(r)?(this.eventEmitter.emit("pre_response",r),this.eventEmitter.emit("response"+r.header.id.toString(),r),this.eventEmitter.emit("post_response",r)):console.error("Failed to handle message:",r)}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function ct(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function ue(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){ct(n,t,e,a,c,"next",l)}function c(l){ct(n,t,e,a,c,"throw",l)}a(void 0)})}}function ce(s,o,r){return(function(t,e){if(t!==e)throw TypeError("Private static access of wrong provenance")})(s,o),(function(t,e){if(t===void 0)throw TypeError("attempted to get private static field before its declaration")})(r),r.get?r.get.call(s):r.value}function ft(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function fe(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var dr=(function(){var s;function o(){(function(r,t){if(!(r instanceof t))throw TypeError("Cannot call a class as a function")})(this,o),ft(this,"platform","web")}return s=[{key:"getLocalStorageEnabled",value:function(){var r=!1;try{r=window.localStorage&&!0}catch{r=!1}return r}},{key:"setAllLocalStorage",value:function(r,t){var e=this;return ue(function(){var n;return fe(this,function(a){return e.getLocalStorageEnabled()?(n=JSON.stringify(t),localStorage.setItem(ce(o,o,le)+r,n)):console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]})})()}},{key:"setLocalStorage",value:function(r,t,e){var n=this;return ue(function(){var a,c;return fe(this,function(l){switch(l.label){case 0:return n.getLocalStorageEnabled()?[4,n.getAllLocalStorage(r)]:(console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]);case 1:return(a=l.sent())?(a[t]=e,localStorage.setItem(ce(o,o,le)+r,JSON.stringify(a)),[2]):(c=ft({},t,e),localStorage.setItem(ce(o,o,le)+r,JSON.stringify(c)),[2])}})})()}},{key:"getLocalStorage",value:function(r,t){var e=this;return ue(function(){var n;return fe(this,function(a){switch(a.label){case 0:return e.getLocalStorageEnabled()?[4,e.getAllLocalStorage(r)]:(console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]);case 1:n=a.sent();try{if(n)return[2,JSON.parse(n[t])]}catch{if(n)return[2,n[t]]}return[2]}})})()}},{key:"getAllLocalStorage",value:function(r){var t=this;return ue(function(){var e;return fe(this,function(n){if(!t.getLocalStorageEnabled())return console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2];try{return e=localStorage.getItem(ce(o,o,le)+r)?JSON.parse(localStorage.getItem(ce(o,o,le)+r)):void 0,[2,e]}catch{return[2,void 0]}return[2]})})()}},{key:"clearLocalStorage",value:function(r,t){var e=this;return ue(function(){var n;return fe(this,function(a){switch(a.label){case 0:return e.getLocalStorageEnabled()?[4,e.getLocalStorage(r,t)]:(console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]);case 1:return a.sent()?[4,e.getAllLocalStorage(r)]:[3,3];case 2:if(!(n=a.sent()))return[2];delete n[t],localStorage.setItem(ce(o,o,le)+r,JSON.stringify(n)),a.label=3;case 3:return[2]}})})()}},{key:"clearAllLocalStorage",value:function(r){var t=this;return ue(function(){return fe(this,function(e){return t.getLocalStorageEnabled()?localStorage.removeItem(ce(o,o,le)+r):console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2]})})()}},{key:"setLoginUserLocalStorage",value:function(r,t,e){var n=this;return ue(function(){var a;return fe(this,function(c){return n.getLocalStorageEnabled()?((a={})["firebase:wepin"]=Object.assign({provider:t?.provider},t?.token),a["wepin:connectUser"]={accessToken:e.token.access,refreshToken:e.token.refresh},a.user_id=e.userInfo.userId,a.user_info={status:"success",userInfo:{userId:e.userInfo.userId,email:e.userInfo.email,provider:t.provider,use2FA:e.userInfo.use2FA>=2}},a.user_status={loginStatus:e.loginStatus,pinRequired:e.loginStatus==="registerRequired"&&e.pinRequired},e.loginStatus!=="pinRequired"&&e.walletId&&(a.wallet_id=e.walletId,a.user_info.walletId=e.walletId),a.oauth_provider_pending=t.provider,n.setAllLocalStorage(r,a),[2,{userInfo:a.user_info,connectUser:a["wepin:connectUser"]}]):(console.error("Local storage is not available. We recommend using local storage to maintain login sessions."),[2])})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})(),le={writable:!0,value:"wepin:auth:"};function hr(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var We={exports:{}};const br={},xr=Object.freeze(Object.defineProperty({__proto__:null,default:br},Symbol.toStringTag,{value:"Module"})),vr=ar(xr);var pr=We.exports,lt;function yr(){return lt||(lt=1,(function(s){(function(o,r){typeof hr=="function"&&s&&s.exports?s.exports=r():(o.dcodeIO=o.dcodeIO||{}).bcrypt=r()})(pr,function(){var o={},r=null;function t(m){if(s&&s.exports)try{return vr.randomBytes(m)}catch{}try{var w;return(self.crypto||self.msCrypto).getRandomValues(w=new Uint32Array(m)),Array.prototype.slice.call(w)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(m)}var e=!1;try{t(1),e=!0}catch{}r=null,o.setRandomFallback=function(m){r=m},o.genSaltSync=function(m,w){if(m=m||R,typeof m!="number")throw Error("Illegal arguments: "+typeof m+", "+typeof w);m<4?m=4:m>31&&(m=31);var v=[];return v.push("$2a$"),m<10&&v.push("0"),v.push(m.toString()),v.push("$"),v.push(_(t(B),B)),v.join("")},o.genSalt=function(m,w,v){if(typeof w=="function"&&(v=w,w=void 0),typeof m=="function"&&(v=m,m=void 0),typeof m>"u")m=R;else if(typeof m!="number")throw Error("illegal arguments: "+typeof m);function x(d){a(function(){try{d(null,o.genSaltSync(m))}catch(k){d(k)}})}if(v){if(typeof v!="function")throw Error("Illegal callback: "+typeof v);x(v)}else return new Promise(function(d,k){x(function(S,u){if(S){k(S);return}d(u)})})},o.hashSync=function(m,w){if(typeof w>"u"&&(w=R),typeof w=="number"&&(w=o.genSaltSync(w)),typeof m!="string"||typeof w!="string")throw Error("Illegal arguments: "+typeof m+", "+typeof w);return G(m,w)},o.hash=function(m,w,v,x){function d(k){typeof m=="string"&&typeof w=="number"?o.genSalt(w,function(S,u){G(m,u,k,x)}):typeof m=="string"&&typeof w=="string"?G(m,w,k,x):a(k.bind(this,Error("Illegal arguments: "+typeof m+", "+typeof w)))}if(v){if(typeof v!="function")throw Error("Illegal callback: "+typeof v);d(v)}else return new Promise(function(k,S){d(function(u,f){if(u){S(u);return}k(f)})})};function n(m,w){for(var v=0,x=0,d=0,k=m.length;d<k;++d)m.charCodeAt(d)===w.charCodeAt(d)?++v:++x;return v<0?!1:x===0}o.compareSync=function(m,w){if(typeof m!="string"||typeof w!="string")throw Error("Illegal arguments: "+typeof m+", "+typeof w);return w.length!==60?!1:n(o.hashSync(m,w.substr(0,w.length-31)),w)},o.compare=function(m,w,v,x){function d(k){if(typeof m!="string"||typeof w!="string"){a(k.bind(this,Error("Illegal arguments: "+typeof m+", "+typeof w)));return}if(w.length!==60){a(k.bind(this,null,!1));return}o.hash(m,w.substr(0,29),function(S,u){S?k(S):k(null,n(u,w))},x)}if(v){if(typeof v!="function")throw Error("Illegal callback: "+typeof v);d(v)}else return new Promise(function(k,S){d(function(u,f){if(u){S(u);return}k(f)})})},o.getRounds=function(m){if(typeof m!="string")throw Error("Illegal arguments: "+typeof m);return parseInt(m.split("$")[2],10)},o.getSalt=function(m){if(typeof m!="string")throw Error("Illegal arguments: "+typeof m);if(m.length!==60)throw Error("Illegal hash length: "+m.length+" != 60");return m.substring(0,29)};var a=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function c(m){var w=[],v=0;return N.encodeUTF16toUTF8(function(){return v>=m.length?null:m.charCodeAt(v++)},function(x){w.push(x)}),w}var l="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),b=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],i=String.fromCharCode;function _(m,w){var v=0,x=[],d,k;if(w<=0||w>m.length)throw Error("Illegal len: "+w);for(;v<w;){if(d=m[v++]&255,x.push(l[d>>2&63]),d=(d&3)<<4,v>=w){x.push(l[d&63]);break}if(k=m[v++]&255,d|=k>>4&15,x.push(l[d&63]),d=(k&15)<<2,v>=w){x.push(l[d&63]);break}k=m[v++]&255,d|=k>>6&3,x.push(l[d&63]),x.push(l[k&63])}return x.join("")}function j(m,w){var v=0,x=m.length,d=0,k=[],S,u,f,h,p,y;if(w<=0)throw Error("Illegal len: "+w);for(;v<x-1&&d<w&&(y=m.charCodeAt(v++),S=y<b.length?b[y]:-1,y=m.charCodeAt(v++),u=y<b.length?b[y]:-1,!(S==-1||u==-1||(p=S<<2>>>0,p|=(u&48)>>4,k.push(i(p)),++d>=w||v>=x)||(y=m.charCodeAt(v++),f=y<b.length?b[y]:-1,f==-1)||(p=(u&15)<<4>>>0,p|=(f&60)>>2,k.push(i(p)),++d>=w||v>=x)));)y=m.charCodeAt(v++),h=y<b.length?b[y]:-1,p=(f&3)<<6>>>0,p|=h,k.push(i(p)),++d;var g=[];for(v=0;v<d;v++)g.push(k[v].charCodeAt(0));return g}var N=(function(){var m={};return m.MAX_CODEPOINT=1114111,m.encodeUTF8=function(w,v){var x=null;for(typeof w=="number"&&(x=w,w=function(){return null});x!==null||(x=w())!==null;)x<128?v(x&127):x<2048?(v(x>>6&31|192),v(x&63|128)):x<65536?(v(x>>12&15|224),v(x>>6&63|128),v(x&63|128)):(v(x>>18&7|240),v(x>>12&63|128),v(x>>6&63|128),v(x&63|128)),x=null},m.decodeUTF8=function(w,v){for(var x,d,k,S,u=function(f){f=f.slice(0,f.indexOf(null));var h=Error(f.toString());throw h.name="TruncatedError",h.bytes=f,h};(x=w())!==null;)if((x&128)===0)v(x);else if((x&224)===192)(d=w())===null&&u([x,d]),v((x&31)<<6|d&63);else if((x&240)===224)((d=w())===null||(k=w())===null)&&u([x,d,k]),v((x&15)<<12|(d&63)<<6|k&63);else if((x&248)===240)((d=w())===null||(k=w())===null||(S=w())===null)&&u([x,d,k,S]),v((x&7)<<18|(d&63)<<12|(k&63)<<6|S&63);else throw RangeError("Illegal starting byte: "+x)},m.UTF16toUTF8=function(w,v){for(var x,d=null;(x=d!==null?d:w())!==null;){if(x>=55296&&x<=57343&&(d=w())!==null&&d>=56320&&d<=57343){v((x-55296)*1024+d-56320+65536),d=null;continue}v(x)}d!==null&&v(d)},m.UTF8toUTF16=function(w,v){var x=null;for(typeof w=="number"&&(x=w,w=function(){return null});x!==null||(x=w())!==null;)x<=65535?v(x):(x-=65536,v((x>>10)+55296),v(x%1024+56320)),x=null},m.encodeUTF16toUTF8=function(w,v){m.UTF16toUTF8(w,function(x){m.encodeUTF8(x,v)})},m.decodeUTF8toUTF16=function(w,v){m.decodeUTF8(w,function(x){m.UTF8toUTF16(x,v)})},m.calculateCodePoint=function(w){return w<128?1:w<2048?2:w<65536?3:4},m.calculateUTF8=function(w){for(var v,x=0;(v=w())!==null;)x+=m.calculateCodePoint(v);return x},m.calculateUTF16asUTF8=function(w){var v=0,x=0;return m.UTF16toUTF8(w,function(d){++v,x+=m.calculateCodePoint(d)}),[v,x]},m})();Date.now=Date.now||function(){return+new Date};var B=16,R=10,U=16,J=100,M=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],q=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],T=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function P(m,w,v,x){var d,k=m[w],S=m[w+1];return k^=v[0],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[1],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[2],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[3],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[4],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[5],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[6],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[7],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[8],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[9],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[10],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[11],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[12],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[13],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[14],d=x[k>>>24],d+=x[256|k>>16&255],d^=x[512|k>>8&255],d+=x[768|k&255],S^=d^v[15],d=x[S>>>24],d+=x[256|S>>16&255],d^=x[512|S>>8&255],d+=x[768|S&255],k^=d^v[16],m[w]=S^v[U+1],m[w+1]=k,m}function L(m,w){for(var v=0,x=0;v<4;++v)x=x<<8|m[w]&255,w=(w+1)%m.length;return{key:x,offp:w}}function A(m,w,v){for(var x=0,d=[0,0],k=w.length,S=v.length,u,f=0;f<k;f++)u=L(m,x),x=u.offp,w[f]=w[f]^u.key;for(f=0;f<k;f+=2)d=P(d,0,w,v),w[f]=d[0],w[f+1]=d[1];for(f=0;f<S;f+=2)d=P(d,0,w,v),v[f]=d[0],v[f+1]=d[1]}function F(m,w,v,x){for(var d=0,k=[0,0],S=v.length,u=x.length,f,h=0;h<S;h++)f=L(w,d),d=f.offp,v[h]=v[h]^f.key;for(d=0,h=0;h<S;h+=2)f=L(m,d),d=f.offp,k[0]^=f.key,f=L(m,d),d=f.offp,k[1]^=f.key,k=P(k,0,v,x),v[h]=k[0],v[h+1]=k[1];for(h=0;h<u;h+=2)f=L(m,d),d=f.offp,k[0]^=f.key,f=L(m,d),d=f.offp,k[1]^=f.key,k=P(k,0,v,x),x[h]=k[0],x[h+1]=k[1]}function $(m,w,v,x,d){var k=T.slice(),S=k.length,u;if(v<4||v>31)if(u=Error("Illegal number of rounds (4-31): "+v),x){a(x.bind(this,u));return}else throw u;if(w.length!==B)if(u=Error("Illegal salt length: "+w.length+" != "+B),x){a(x.bind(this,u));return}else throw u;v=1<<v>>>0;var f,h,p=0,y;Int32Array?(f=new Int32Array(M),h=new Int32Array(q)):(f=M.slice(),h=q.slice()),F(w,m,f,h);function g(){if(d&&d(p/v),p<v)for(var I=Date.now();p<v&&(p=p+1,A(m,f,h),A(w,f,h),!(Date.now()-I>J)););else{for(p=0;p<64;p++)for(y=0;y<S>>1;y++)P(k,y<<1,f,h);var E=[];for(p=0;p<S;p++)E.push((k[p]>>24&255)>>>0),E.push((k[p]>>16&255)>>>0),E.push((k[p]>>8&255)>>>0),E.push((k[p]&255)>>>0);if(x){x(null,E);return}else return E}x&&a(g)}if(typeof x<"u")g();else for(var O;;)if(typeof(O=g())<"u")return O||[]}function G(m,w,v,x){var d;if(typeof m!="string"||typeof w!="string")if(d=Error("Invalid string / salt: Not a string"),v){a(v.bind(this,d));return}else throw d;var k,S;if(w.charAt(0)!=="$"||w.charAt(1)!=="2")if(d=Error("Invalid salt version: "+w.substring(0,2)),v){a(v.bind(this,d));return}else throw d;if(w.charAt(2)==="$")k="\0",S=3;else{if(k=w.charAt(2),k!=="a"&&k!=="b"&&k!=="y"||w.charAt(3)!=="$")if(d=Error("Invalid salt revision: "+w.substring(2,4)),v){a(v.bind(this,d));return}else throw d;S=4}if(w.charAt(S+2)>"$")if(d=Error("Missing salt rounds"),v){a(v.bind(this,d));return}else throw d;var u=parseInt(w.substring(S,S+1),10)*10,f=parseInt(w.substring(S+1,S+2),10),h=u+f,p=w.substring(S+3,S+25);m+=k>="a"?"\0":"";var y=c(m),g=j(p,B);function O(I){var E=[];return E.push("$2"),k>="a"&&E.push(k),E.push("$"),h<10&&E.push("0"),E.push(h.toString()),E.push("$"),E.push(_(g,g.length)),E.push(_(I,T.length*4-1)),E.join("")}if(typeof v>"u")return O($(y,g,h));$(y,g,h,function(I,E){I?v(I,null):v(null,O(E))},x)}return o.encodeBase64=_,o.decodeBase64=j,o})})(We)),We.exports}var wr=yr();const Pe=Kt(wr);var De={exports:{}};var dt;function mr(){return dt||(dt=1,(function(s,o){(function(r){var t=Object.hasOwnProperty,e=Array.isArray?Array.isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]"},n=10,a=typeof process=="object"&&typeof process.nextTick=="function",c=typeof Symbol=="function",l=typeof Reflect=="object",b=typeof setImmediate=="function",i=b?setImmediate:setTimeout,_=c?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(u){var f=Object.getOwnPropertyNames(u);return f.push.apply(f,Object.getOwnPropertySymbols(u)),f}:Object.keys;function j(){this._events={},this._conf&&N.call(this,this._conf)}function N(u){u&&(this._conf=u,u.delimiter&&(this.delimiter=u.delimiter),u.maxListeners!==r&&(this._maxListeners=u.maxListeners),u.wildcard&&(this.wildcard=u.wildcard),u.newListener&&(this._newListener=u.newListener),u.removeListener&&(this._removeListener=u.removeListener),u.verboseMemoryLeak&&(this.verboseMemoryLeak=u.verboseMemoryLeak),u.ignoreErrors&&(this.ignoreErrors=u.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function B(u,f){var h="(node) warning: possible EventEmitter memory leak detected. "+u+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(h+=" Event name: "+f+"."),typeof process<"u"&&process.emitWarning){var p=new Error(h);p.name="MaxListenersExceededWarning",p.emitter=this,p.count=u,process.emitWarning(p)}else console.error(h),console.trace&&console.trace()}var R=function(u,f,h){var p=arguments.length;switch(p){case 0:return[];case 1:return[u];case 2:return[u,f];case 3:return[u,f,h];default:for(var y=new Array(p);p--;)y[p]=arguments[p];return y}};function U(u,f){for(var h={},p,y=u.length,g=0,O=0;O<y;O++)p=u[O],h[p]=O<g?f[O]:r;return h}function J(u,f,h){this._emitter=u,this._target=f,this._listeners={},this._listenersCount=0;var p,y;if((h.on||h.off)&&(p=h.on,y=h.off),f.addEventListener?(p=f.addEventListener,y=f.removeEventListener):f.addListener?(p=f.addListener,y=f.removeListener):f.on&&(p=f.on,y=f.off),!p&&!y)throw Error("target does not implement any known event API");if(typeof p!="function")throw TypeError("on method must be a function");if(typeof y!="function")throw TypeError("off method must be a function");this._on=p,this._off=y;var g=u._observers;g?g.push(this):u._observers=[this]}Object.assign(J.prototype,{subscribe:function(u,f,h){var p=this,y=this._target,g=this._emitter,O=this._listeners,I=function(){var E=R.apply(null,arguments),C={data:E,name:f,original:u};if(h){var W=h.call(y,C);W!==!1&&g.emit.apply(g,[C.name].concat(E));return}g.emit.apply(g,[f].concat(E))};if(O[u])throw Error("Event '"+u+"' is already listening");this._listenersCount++,g._newListener&&g._removeListener&&!p._onNewListener?(this._onNewListener=function(E){E===f&&O[u]===null&&(O[u]=I,p._on.call(y,u,I))},g.on("newListener",this._onNewListener),this._onRemoveListener=function(E){E===f&&!g.hasListeners(E)&&O[u]&&(O[u]=null,p._off.call(y,u,I))},O[u]=null,g.on("removeListener",this._onRemoveListener)):(O[u]=I,p._on.call(y,u,I))},unsubscribe:function(u){var f=this,h=this._listeners,p=this._emitter,y,g,O=this._off,I=this._target,E;if(u&&typeof u!="string")throw TypeError("event must be a string");function C(){f._onNewListener&&(p.off("newListener",f._onNewListener),p.off("removeListener",f._onRemoveListener),f._onNewListener=null,f._onRemoveListener=null);var W=F.call(p,f);p._observers.splice(W,1)}if(u){if(y=h[u],!y)return;O.call(I,u,y),delete h[u],--this._listenersCount||C()}else{for(g=_(h),E=g.length;E-- >0;)u=g[E],O.call(I,u,h[u]);this._listeners={},this._listenersCount=0,C()}}});function M(u,f,h,p){var y=Object.assign({},f);if(!u)return y;if(typeof u!="object")throw TypeError("options must be an object");var g=Object.keys(u),O=g.length,I,E,C;function W(D){throw Error('Invalid "'+I+'" option value'+(D?". Reason: "+D:""))}for(var Q=0;Q<O;Q++){if(I=g[Q],!t.call(f,I))throw Error('Unknown "'+I+'" option');E=u[I],E!==r&&(C=h[I],y[I]=C?C(E,W):E)}return y}function q(u,f){return(typeof u!="function"||!u.hasOwnProperty("prototype"))&&f("value must be a constructor"),u}function T(u){var f="value must be type of "+u.join("|"),h=u.length,p=u[0],y=u[1];return h===1?function(g,O){if(typeof g===p)return g;O(f)}:h===2?function(g,O){var I=typeof g;if(I===p||I===y)return g;O(f)}:function(g,O){for(var I=typeof g,E=h;E-- >0;)if(I===u[E])return g;O(f)}}var P=T(["function"]),L=T(["object","function"]);function A(u,f,h){var p,y,g=0,O,I=new u(function(E,C,W){h=M(h,{timeout:0,overload:!1},{timeout:function(Y,z){return Y*=1,(typeof Y!="number"||Y<0||!Number.isFinite(Y))&&z("timeout must be a positive number"),Y}}),p=!h.overload&&typeof u.prototype.cancel=="function"&&typeof W=="function";function Q(){y&&(y=null),g&&(clearTimeout(g),g=0)}var D=function(Y){Q(),E(Y)},H=function(Y){Q(),C(Y)};p?f(D,H,W):(y=[function(Y){H(Y||Error("canceled"))}],f(D,H,function(Y){if(O)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Y!="function")throw TypeError("onCancel callback must be a function");y.push(Y)}),O=!0),h.timeout>0&&(g=setTimeout(function(){var Y=Error("timeout");Y.code="ETIMEDOUT",g=0,I.cancel(Y),C(Y)},h.timeout))});return p||(I.cancel=function(E){if(y){for(var C=y.length,W=1;W<C;W++)y[W](E);y[0](E),y=null}}),I}function F(u){var f=this._observers;if(!f)return-1;for(var h=f.length,p=0;p<h;p++)if(f[p]._target===u)return p;return-1}function $(u,f,h,p,y){if(!h)return null;if(p===0){var g=typeof f;if(g==="string"){var O,I,E=0,C=0,W=this.delimiter,Q=W.length;if((I=f.indexOf(W))!==-1){O=new Array(5);do O[E++]=f.slice(C,I),C=I+Q;while((I=f.indexOf(W,C))!==-1);O[E++]=f.slice(C),f=O,y=E}else f=[f],y=1}else g==="object"?y=f.length:(f=[f],y=1)}var D=null,H,Y,z,Me,Be,we=f[p],Ke=f[p+1],ne,Z;if(p===y)h._listeners&&(typeof h._listeners=="function"?(u&&u.push(h._listeners),D=[h]):(u&&u.push.apply(u,h._listeners),D=[h]));else if(we==="*"){for(ne=_(h),I=ne.length;I-- >0;)H=ne[I],H!=="_listeners"&&(Z=$(u,f,h[H],p+1,y),Z&&(D?D.push.apply(D,Z):D=Z));return D}else if(we==="**"){for(Be=p+1===y||p+2===y&&Ke==="*",Be&&h._listeners&&(D=$(u,f,h,y,y)),ne=_(h),I=ne.length;I-- >0;)H=ne[I],H!=="_listeners"&&(H==="*"||H==="**"?(h[H]._listeners&&!Be&&(Z=$(u,f,h[H],y,y),Z&&(D?D.push.apply(D,Z):D=Z)),Z=$(u,f,h[H],p,y)):H===Ke?Z=$(u,f,h[H],p+2,y):Z=$(u,f,h[H],p,y),Z&&(D?D.push.apply(D,Z):D=Z));return D}else h[we]&&(D=$(u,f,h[we],p+1,y));if(Y=h["*"],Y&&$(u,f,Y,p+1,y),z=h["**"],z)if(p<y)for(z._listeners&&$(u,f,z,y,y),ne=_(z),I=ne.length;I-- >0;)H=ne[I],H!=="_listeners"&&(H===Ke?$(u,f,z[H],p+2,y):H===we?$(u,f,z[H],p+1,y):(Me={},Me[H]=z[H],$(u,f,{"**":Me},p+1,y)));else z._listeners?$(u,f,z,y,y):z["*"]&&z["*"]._listeners&&$(u,f,z["*"],y,y);return D}function G(u,f,h){var p=0,y=0,g,O=this.delimiter,I=O.length,E;if(typeof u=="string")if((g=u.indexOf(O))!==-1){E=new Array(5);do E[p++]=u.slice(y,g),y=g+I;while((g=u.indexOf(O,y))!==-1);E[p++]=u.slice(y)}else E=[u],p=1;else E=u,p=u.length;if(p>1){for(g=0;g+1<p;g++)if(E[g]==="**"&&E[g+1]==="**")return}var C=this.listenerTree,W;for(g=0;g<p;g++)if(W=E[g],C=C[W]||(C[W]={}),g===p-1)return C._listeners?(typeof C._listeners=="function"&&(C._listeners=[C._listeners]),h?C._listeners.unshift(f):C._listeners.push(f),!C._listeners.warned&&this._maxListeners>0&&C._listeners.length>this._maxListeners&&(C._listeners.warned=!0,B.call(this,C._listeners.length,W))):C._listeners=f,!0;return!0}function m(u,f,h,p){for(var y=_(u),g=y.length,O,I,E,C=u._listeners,W;g-- >0;)I=y[g],O=u[I],I==="_listeners"?E=h:E=h?h.concat(I):[I],W=p||typeof I=="symbol",C&&f.push(W?E:E.join(this.delimiter)),typeof O=="object"&&m.call(this,O,f,E,W);return f}function w(u){for(var f=_(u),h=f.length,p,y,g;h-- >0;)y=f[h],p=u[y],p&&(g=!0,y!=="_listeners"&&!w(p)&&delete u[y]);return g}function v(u,f,h){this.emitter=u,this.event=f,this.listener=h}v.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function x(u,f,h){if(h===!0)y=!0;else if(h===!1)p=!0;else{if(!h||typeof h!="object")throw TypeError("options should be an object or true");var p=h.async,y=h.promisify,g=h.nextTick,O=h.objectify}if(p||g||y){var I=f,E=f._origin||f;if(g&&!a)throw Error("process.nextTick is not supported");y===r&&(y=f.constructor.name==="AsyncFunction"),f=function(){var C=arguments,W=this,Q=this.event;return y?g?Promise.resolve():new Promise(function(D){i(D)}).then(function(){return W.event=Q,I.apply(W,C)}):(g?process.nextTick:i)(function(){W.event=Q,I.apply(W,C)})},f._async=!0,f._origin=E}return[f,O?new v(this,u,f):this]}function d(u){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,N.call(this,u)}d.EventEmitter2=d,d.prototype.listenTo=function(u,f,h){if(typeof u!="object")throw TypeError("target musts be an object");var p=this;h=M(h,{on:r,off:r,reducers:r},{on:P,off:P,reducers:L});function y(g){if(typeof g!="object")throw TypeError("events must be an object");var O=h.reducers,I=F.call(p,u),E;I===-1?E=new J(p,u,h):E=p._observers[I];for(var C=_(g),W=C.length,Q,D=typeof O=="function",H=0;H<W;H++)Q=C[H],E.subscribe(Q,g[Q]||Q,D?O:O&&O[Q])}return e(f)?y(U(f)):y(typeof f=="string"?U(f.split(/\s+/)):f),this},d.prototype.stopListeningTo=function(u,f){var h=this._observers;if(!h)return!1;var p=h.length,y,g=!1;if(u&&typeof u!="object")throw TypeError("target should be an object");for(;p-- >0;)y=h[p],(!u||y._target===u)&&(y.unsubscribe(f),g=!0);return g},d.prototype.delimiter=".",d.prototype.setMaxListeners=function(u){u!==r&&(this._maxListeners=u,this._conf||(this._conf={}),this._conf.maxListeners=u)},d.prototype.getMaxListeners=function(){return this._maxListeners},d.prototype.event="",d.prototype.once=function(u,f,h){return this._once(u,f,!1,h)},d.prototype.prependOnceListener=function(u,f,h){return this._once(u,f,!0,h)},d.prototype._once=function(u,f,h,p){return this._many(u,1,f,h,p)},d.prototype.many=function(u,f,h,p){return this._many(u,f,h,!1,p)},d.prototype.prependMany=function(u,f,h,p){return this._many(u,f,h,!0,p)},d.prototype._many=function(u,f,h,p,y){var g=this;if(typeof h!="function")throw new Error("many only accepts instances of Function");function O(){return--f===0&&g.off(u,O),h.apply(this,arguments)}return O._origin=h,this._on(u,O,p,y)},d.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||j.call(this);var u=arguments[0],f,h=this.wildcard,p,y,g,O,I;if(u==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(h&&(f=u,u!=="newListener"&&u!=="removeListener"&&typeof u=="object")){if(y=u.length,c){for(g=0;g<y;g++)if(typeof u[g]=="symbol"){I=!0;break}}I||(u=u.join(this.delimiter))}var E=arguments.length,C;if(this._all&&this._all.length)for(C=this._all.slice(),g=0,y=C.length;g<y;g++)switch(this.event=u,E){case 1:C[g].call(this,u);break;case 2:C[g].call(this,u,arguments[1]);break;case 3:C[g].call(this,u,arguments[1],arguments[2]);break;default:C[g].apply(this,arguments)}if(h)C=[],$.call(this,C,f,this.listenerTree,0,y);else if(C=this._events[u],typeof C=="function"){switch(this.event=u,E){case 1:C.call(this);break;case 2:C.call(this,arguments[1]);break;case 3:C.call(this,arguments[1],arguments[2]);break;default:for(p=new Array(E-1),O=1;O<E;O++)p[O-1]=arguments[O];C.apply(this,p)}return!0}else C&&(C=C.slice());if(C&&C.length){if(E>3)for(p=new Array(E-1),O=1;O<E;O++)p[O-1]=arguments[O];for(g=0,y=C.length;g<y;g++)switch(this.event=u,E){case 1:C[g].call(this);break;case 2:C[g].call(this,arguments[1]);break;case 3:C[g].call(this,arguments[1],arguments[2]);break;default:C[g].apply(this,p)}return!0}else if(!this.ignoreErrors&&!this._all&&u==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||j.call(this);var u=arguments[0],f=this.wildcard,h,p,y,g,O,I;if(u==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(f&&(h=u,u!=="newListener"&&u!=="removeListener"&&typeof u=="object")){if(g=u.length,c){for(O=0;O<g;O++)if(typeof u[O]=="symbol"){p=!0;break}}p||(u=u.join(this.delimiter))}var E=[],C=arguments.length,W;if(this._all)for(O=0,g=this._all.length;O<g;O++)switch(this.event=u,C){case 1:E.push(this._all[O].call(this,u));break;case 2:E.push(this._all[O].call(this,u,arguments[1]));break;case 3:E.push(this._all[O].call(this,u,arguments[1],arguments[2]));break;default:E.push(this._all[O].apply(this,arguments))}if(f?(W=[],$.call(this,W,h,this.listenerTree,0)):W=this._events[u],typeof W=="function")switch(this.event=u,C){case 1:E.push(W.call(this));break;case 2:E.push(W.call(this,arguments[1]));break;case 3:E.push(W.call(this,arguments[1],arguments[2]));break;default:for(y=new Array(C-1),I=1;I<C;I++)y[I-1]=arguments[I];E.push(W.apply(this,y))}else if(W&&W.length){if(W=W.slice(),C>3)for(y=new Array(C-1),I=1;I<C;I++)y[I-1]=arguments[I];for(O=0,g=W.length;O<g;O++)switch(this.event=u,C){case 1:E.push(W[O].call(this));break;case 2:E.push(W[O].call(this,arguments[1]));break;case 3:E.push(W[O].call(this,arguments[1],arguments[2]));break;default:E.push(W[O].apply(this,y))}}else if(!this.ignoreErrors&&!this._all&&u==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(E)},d.prototype.on=function(u,f,h){return this._on(u,f,!1,h)},d.prototype.prependListener=function(u,f,h){return this._on(u,f,!0,h)},d.prototype.onAny=function(u){return this._onAny(u,!1)},d.prototype.prependAny=function(u){return this._onAny(u,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(u,f){if(typeof u!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),f?this._all.unshift(u):this._all.push(u),this},d.prototype._on=function(u,f,h,p){if(typeof u=="function")return this._onAny(u,f),this;if(typeof f!="function")throw new Error("on only accepts instances of Function");this._events||j.call(this);var y=this,g;return p!==r&&(g=x.call(this,u,f,p),f=g[0],y=g[1]),this._newListener&&this.emit("newListener",u,f),this.wildcard?(G.call(this,u,f,h),y):(this._events[u]?(typeof this._events[u]=="function"&&(this._events[u]=[this._events[u]]),h?this._events[u].unshift(f):this._events[u].push(f),!this._events[u].warned&&this._maxListeners>0&&this._events[u].length>this._maxListeners&&(this._events[u].warned=!0,B.call(this,this._events[u].length,u))):this._events[u]=f,y)},d.prototype.off=function(u,f){if(typeof f!="function")throw new Error("removeListener only takes instances of Function");var h,p=[];if(this.wildcard){var y=typeof u=="string"?u.split(this.delimiter):u.slice();if(p=$.call(this,null,y,this.listenerTree,0),!p)return this}else{if(!this._events[u])return this;h=this._events[u],p.push({_listeners:h})}for(var g=0;g<p.length;g++){var O=p[g];if(h=O._listeners,e(h)){for(var I=-1,E=0,C=h.length;E<C;E++)if(h[E]===f||h[E].listener&&h[E].listener===f||h[E]._origin&&h[E]._origin===f){I=E;break}if(I<0)continue;return this.wildcard?O._listeners.splice(I,1):this._events[u].splice(I,1),h.length===0&&(this.wildcard?delete O._listeners:delete this._events[u]),this._removeListener&&this.emit("removeListener",u,f),this}else(h===f||h.listener&&h.listener===f||h._origin&&h._origin===f)&&(this.wildcard?delete O._listeners:delete this._events[u],this._removeListener&&this.emit("removeListener",u,f))}return this.listenerTree&&w(this.listenerTree),this},d.prototype.offAny=function(u){var f=0,h=0,p;if(u&&this._all&&this._all.length>0){for(p=this._all,f=0,h=p.length;f<h;f++)if(u===p[f])return p.splice(f,1),this._removeListener&&this.emit("removeListenerAny",u),this}else{if(p=this._all,this._removeListener)for(f=0,h=p.length;f<h;f++)this.emit("removeListenerAny",p[f]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(u){if(u===r)return!this._events||j.call(this),this;if(this.wildcard){var f=$.call(this,null,u,this.listenerTree,0),h,p;if(!f)return this;for(p=0;p<f.length;p++)h=f[p],h._listeners=null;this.listenerTree&&w(this.listenerTree)}else this._events&&(this._events[u]=null);return this},d.prototype.listeners=function(u){var f=this._events,h,p,y,g,O;if(u===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!f)return[];for(h=_(f),g=h.length,y=[];g-- >0;)p=f[h[g]],typeof p=="function"?y.push(p):y.push.apply(y,p);return y}else{if(this.wildcard){if(O=this.listenerTree,!O)return[];var I=[],E=typeof u=="string"?u.split(this.delimiter):u.slice();return $.call(this,I,E,O,0),I}return f?(p=f[u],p?typeof p=="function"?[p]:p:[]):[]}},d.prototype.eventNames=function(u){var f=this._events;return this.wildcard?m.call(this,this.listenerTree,[],null,u):f?_(f):[]},d.prototype.listenerCount=function(u){return this.listeners(u).length},d.prototype.hasListeners=function(u){if(this.wildcard){var f=[],h=typeof u=="string"?u.split(this.delimiter):u.slice();return $.call(this,f,h,this.listenerTree,0),f.length>0}var p=this._events,y=this._all;return!!(y&&y.length||p&&(u===r?_(p).length:p[u]))},d.prototype.listenersAny=function(){return this._all?this._all:[]},d.prototype.waitFor=function(u,f){var h=this,p=typeof f;return p==="number"?f={timeout:f}:p==="function"&&(f={filter:f}),f=M(f,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:P,Promise:q}),A(f.Promise,function(y,g,O){function I(){var E=f.filter;if(!(E&&!E.apply(h,arguments)))if(h.off(u,I),f.handleError){var C=arguments[0];C?g(C):y(R.apply(null,arguments).slice(1))}else y(R.apply(null,arguments))}O(function(){h.off(u,I)}),h._on(u,I,!1)},{timeout:f.timeout,overload:f.overload})};function k(u,f,h){h=M(h,{Promise,timeout:0,overload:!1},{Promise:q});var p=h.Promise;return A(p,function(y,g,O){var I;if(typeof u.addEventListener=="function"){I=function(){y(R.apply(null,arguments))},O(function(){u.removeEventListener(f,I)}),u.addEventListener(f,I,{once:!0});return}var E=function(){C&&u.removeListener("error",C),y(R.apply(null,arguments))},C;f!=="error"&&(C=function(W){u.removeListener(f,E),g(W)},u.once("error",C)),O(function(){C&&u.removeListener("error",C),u.removeListener(f,E)}),u.once(f,E)},{timeout:h.timeout,overload:h.overload})}var S=d.prototype;Object.defineProperties(d,{defaultMaxListeners:{get:function(){return S._maxListeners},set:function(u){if(typeof u!="number"||u<0||Number.isNaN(u))throw TypeError("n must be a non-negative number");S._maxListeners=u},enumerable:!0},once:{value:k,writable:!0,configurable:!0}}),Object.defineProperties(S,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),s.exports=d})()})(De)),De.exports}var gr=mr();const _r=Kt(gr);function Oe(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Dt(s){var o=s.data,r=s.status,t=s.headers,e=s.request;(function(n,a){if(!(n instanceof a))throw TypeError("Cannot call a class as a function")})(this,Dt),Oe(this,"data",void 0),Oe(this,"status",void 0),Oe(this,"headers",void 0),Oe(this,"request",void 0),this.data=o,this.status=r,this.headers=t,this.request=e}function et(s,o){(o==null||o>s.length)&&(o=s.length);for(var r=0,t=Array(o);r<o;r++)t[r]=s[r];return t}function ht(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function xe(s,o,r){return(xe=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,e,n){var a=(function(l,b){for(;!Object.prototype.hasOwnProperty.call(l,b)&&(l=re(l))!==null;);return l})(t,e);if(a){var c=Object.getOwnPropertyDescriptor(a,e);return c.get?c.get.call(n||t):c.value}})(s,o,r||s)}function re(s){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(s)}function Ht(s,o){return(Ht=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(s,o)}function bt(s,o){return(function(r){if(Array.isArray(r))return r})(s)||(function(r,t){var e,n,a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var c=[],l=!0,b=!1;try{for(a=a.call(r);!(l=(e=a.next()).done)&&(c.push(e.value),!t||c.length!==t);l=!0);}catch(i){b=!0,n=i}finally{try{l||a.return==null||a.return()}finally{if(b)throw n}}return c}})(s,o)||Jt(s,o)||(function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function xt(s){return(function(o){if(Array.isArray(o))return et(o)})(s)||(function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)})(s)||Jt(s)||(function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Jt(s,o){if(s){if(typeof s=="string")return et(s,o);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(s,o)}}function Yt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yt=function(){return!!s})()}var Qt=(function(s){var o;function r(t){var e,n,a,c,l,b;return(function(i,_){if(!(i instanceof _))throw TypeError("Cannot call a class as a function")})(this,r),n=re(n=r),e=(b=Yt()?Reflect.construct(n,[],re(this).constructor):n.apply(this,a))&&((b&&typeof Symbol<"u"&&b.constructor===Symbol?"symbol":typeof b)=="object"||typeof b=="function")?b:(function(i){if(i===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i})(this),l=void 0,(c="baseUrl")in e?Object.defineProperty(e,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[c]=l,e.baseUrl=t,e}return(function(t,e){if(typeof e!="function"&&e!==null)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)})(r,s),o=[{key:"send",value:function(t,e){var n,a=this;return(n=function(){var c,l,b,i,_,j,N,B,R,U,J,M;return(function(q,T){var P,L,A,F,$={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return F={next:G(0),throw:G(1),return:G(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function G(m){return function(w){return(function(v){if(P)throw TypeError("Generator is already executing.");for(;$;)try{if(P=1,L&&(A=2&v[0]?L.return:v[0]?L.throw||((A=L.return)&&A.call(L),0):L.next)&&!(A=A.call(L,v[1])).done)return A;switch(L=0,A&&(v=[2&v[0],A.value]),v[0]){case 0:case 1:A=v;break;case 4:return $.label++,{value:v[1],done:!1};case 5:$.label++,L=v[1],v=[0];continue;case 7:v=$.ops.pop(),$.trys.pop();continue;default:if(!(A=(A=$.trys).length>0&&A[A.length-1])&&(v[0]===6||v[0]===2)){$=0;continue}if(v[0]===3&&(!A||v[1]>A[0]&&v[1]<A[3])){$.label=v[1];break}if(v[0]===6&&$.label<A[1]){$.label=A[1],A=v;break}if(A&&$.label<A[2]){$.label=A[2],$.ops.push(v);break}A[2]&&$.ops.pop(),$.trys.pop();continue}v=T.call(q,$)}catch(x){v=[6,x],L=0}finally{P=A=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}})([m,w])}}})(this,function(q){switch(q.label){case 0:var T;return c=t.url,l=t.query,b=t.method,i=t.data,_=t.headers,N=(j=bt(((T=FormData)!=null&&typeof Symbol<"u"&&T[Symbol.hasInstance]?T[Symbol.hasInstance](i):i instanceof T)?[i,{}]:[typeof i!="string"?JSON.stringify(i):i,{"Content-Type":"application/json"}],2))[0],B=j[1],R=a.baseUrl+c,[4,fetch(a.getUrlWithParams(R,l),{method:b,headers:Object.assign(_||{},B),body:N,credentials:t.withCredentials?"include":"same-origin"})];case 1:return[4,(U=q.sent()).json()];case 2:return J=q.sent(),M=a.convertHeadersToPlainObject(U.headers),[2,new Dt({data:J,status:U.status,headers:M,request:t})]}})},function(){var c=this,l=arguments;return new Promise(function(b,i){var _=n.apply(c,l);function j(B){ht(_,b,i,j,N,"next",B)}function N(B){ht(_,b,i,j,N,"throw",B)}j(void 0)})})()}},{key:"getUrlWithParams",value:function(t,e){if(!e)return t;var n=new URL(t);return Object.entries(e).forEach(function(a){var c=bt(a,2),l=c[0],b=c[1];n.searchParams.append(l,b)}),n.toString()}},{key:"convertHeadersToPlainObject",value:function(t){var e={},n=!0,a=!1,c=void 0;try{for(var l,b=Object.keys(t)[Symbol.iterator]();!(n=(l=b.next()).done);n=!0){var i=l.value;e[i]=t.get(i)}}catch(_){a=!0,c=_}finally{try{n||b.return==null||b.return()}finally{if(a)throw c}}return e}},{key:"addListener",value:function(t,e){return xe(re(r.prototype),"addListener",this).call(this,t,e)}},{key:"on",value:function(t,e,n){return xe(re(r.prototype),"on",this).call(this,t,e,n)}},{key:"prependListener",value:function(t,e,n){return xe(re(r.prototype),"prependListener",this).call(this,t,e,n)}},{key:"once",value:function(t,e,n){return xe(re(r.prototype),"once",this).call(this,t,e,n)}},{key:"emit",value:function(t){for(var e,n=arguments.length,a=Array(n>1?n-1:0),c=1;c<n;c++)a[c-1]=arguments[c];return(e=xe(re(r.prototype),"emit",this)).call.apply(e,[this,t].concat(xt(a)))}},{key:"emitAsync",value:function(t){for(var e,n=arguments.length,a=Array(n>1?n-1:0),c=1;c<n;c++)a[c-1]=arguments[c];return(e=xe(re(r.prototype),"emitAsync",this)).call.apply(e,[this,t].concat(xt(a)))}}],(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}})(r.prototype,o),r})(_r);function vt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function ae(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){vt(n,t,e,a,c,"next",l)}function c(l){vt(n,t,e,a,c,"throw",l)}a(void 0)})}}function Le(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function ie(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var kr=(function(){var s;function o(r){(function(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")})(this,o),Le(this,"fetcher",void 0),Le(this,"firebaseKey",void 0),Le(this,"FIREBASE_AUTH_URL","https://identitytoolkit.googleapis.com/v1/"),Le(this,"BCRYPT_SALT","$2a$10$QCJoWqnN.acrjPIgKYCthu");var t=new URL(this.FIREBASE_AUTH_URL);this.firebaseKey=r.apiKey,this.fetcher=new Qt(t.toString())}return s=[{key:"checkError",value:function(r){if(r.error)throw Error("Error code: ".concat(r.error.code,", message: ").concat(r.error.message))}},{key:"signUpWithEmailPassword",value:function(r,t){var e=!(arguments.length>2)||arguments[2]===void 0||arguments[2],n=this;return ae(function(){var a,c,l;return ie(this,function(b){switch(b.label){case 0:return a=t,e&&(a=Pe.hashSync(t,n.BCRYPT_SALT)),c=JSON.stringify({email:r,password:a,returnSecureToken:!0}),[4,n.fetcher.send({url:"accounts:signUp",method:"POST",data:c,query:{key:n.firebaseKey},withCredentials:!1})];case 1:return l=b.sent(),n.checkError(l.data),[2,l.data]}})})()}},{key:"signInWithEmailPassword",value:function(r,t){var e=!(arguments.length>2)||arguments[2]===void 0||arguments[2],n=this;return ae(function(){var a,c,l;return ie(this,function(b){switch(b.label){case 0:return a=t,e&&(a=Pe.hashSync(t,n.BCRYPT_SALT)),c=JSON.stringify({email:r,password:a,returnSecureToken:!0}),[4,n.fetcher.send({url:"accounts:signInWithPassword",method:"POST",data:c,query:{key:n.firebaseKey},withCredentials:!1})];case 1:return l=b.sent(),n.checkError(l.data),[2,l.data]}})})()}},{key:"getCurrentUser",value:function(r){var t=this;return ae(function(){var e,n;return ie(this,function(a){switch(a.label){case 0:return e=JSON.stringify({idToken:r}),[4,t.fetcher.send({url:"accounts:lookup",method:"POST",data:e,query:{key:t.firebaseKey},withCredentials:!1})];case 1:return n=a.sent(),t.checkError(n.data),[2,n.data]}})})()}},{key:"getRefreshIdToken",value:function(r){var t=this;return ae(function(){var e,n,a;return ie(this,function(c){switch(c.label){case 0:return e=JSON.stringify({grant_type:"refresh_token",refresh_token:r}),[4,t.fetcher.send({url:"token",method:"POST",data:e,query:{key:t.firebaseKey},withCredentials:!1})];case 1:return a=(n=c.sent()).data,t.checkError(n.data),[2,a.id_token]}})})()}},{key:"resetPassword",value:function(r,t){var e=!(arguments.length>2)||arguments[2]===void 0||arguments[2],n=this;return ae(function(){var a,c,l;return ie(this,function(b){switch(b.label){case 0:return a=t,e&&(a=Pe.hashSync(t,n.BCRYPT_SALT)),c=JSON.stringify({oobCode:r,newPassword:a}),[4,n.fetcher.send({url:"accounts:resetPassword",method:"POST",data:c,query:{key:n.firebaseKey},withCredentials:!1})];case 1:return l=b.sent(),n.checkError(l.data),[2,l.data]}})})()}},{key:"verifyEmail",value:function(r){var t=this;return ae(function(){var e,n;return ie(this,function(a){switch(a.label){case 0:return e=JSON.stringify({oobCode:r}),[4,t.fetcher.send({url:"accounts:update",method:"POST",data:e,query:{key:t.firebaseKey},withCredentials:!1})];case 1:return n=a.sent(),t.checkError(n.data),[2,n.data]}})})()}},{key:"signInWithCustomToken",value:function(r){var t=this;return ae(function(){var e,n;return ie(this,function(a){switch(a.label){case 0:return e=JSON.stringify({token:r,returnSecureToken:!0}),[4,t.fetcher.send({url:"accounts:signInWithCustomToken",data:e,query:{key:t.firebaseKey},method:"POST",withCredentials:!1})];case 1:return n=a.sent(),t.checkError(n.data),[2,{idToken:n.data.idToken,refreshToken:n.data.refreshToken}]}})})()}},{key:"updatePassword",value:function(r,t){var e=this;return ae(function(){var n,a;return ie(this,function(c){switch(c.label){case 0:return n=JSON.stringify({idToken:r,password:Pe.hashSync(t,e.BCRYPT_SALT),returnSecureToken:!0}),[4,e.fetcher.send({url:"accounts:update",method:"POST",data:n,query:{key:e.firebaseKey},withCredentials:!1})];case 1:return a=c.sent(),e.checkError(a.data),[2,a.data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})(),Er=function(s){var o=s.statusCode!==void 0||s.status!==void 0,r=s.timestamp!==void 0&&s.message!==void 0&&s.path!==void 0;return o&&r},Ie={request:"request",response:"response"};function ve(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function K(s){var o=s.data,r=s.headers,t=s.url,e=s.query,n=s.withCredentials,a=s.method;(function(c,l){if(!(c instanceof l))throw TypeError("Cannot call a class as a function")})(this,K),ve(this,"data",void 0),ve(this,"headers",void 0),ve(this,"url",void 0),ve(this,"query",void 0),ve(this,"withCredentials",void 0),ve(this,"method",void 0),this.data=o,this.headers=r,this.url=t,this.query=e,this.withCredentials=n!==void 0&&n,this.method=a}class _e extends Error{}_e.prototype.name="InvalidTokenError";function Tr(s){return decodeURIComponent(atob(s).replace(/(.)/g,(o,r)=>{let t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function Pr(s){let o=s.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Tr(o)}catch{return atob(o)}}function Or(s,o){if(typeof s!="string")throw new _e("Invalid token specified: must be a string");o||(o={});const r=o.header===!0?0:1,t=s.split(".")[r];if(typeof t!="string")throw new _e(`Invalid token specified: missing part #${r+1}`);let e;try{e=Pr(t)}catch(n){throw new _e(`Invalid token specified: invalid base64 for part #${r+1} (${n.message})`)}try{return JSON.parse(e)}catch(n){throw new _e(`Invalid token specified: invalid json for part #${r+1} (${n.message})`)}}var Lr=function(){var s=function(o){var r;return!o||((r=Or(o))===null||r===void 0?void 0:r.exp)<=Math.floor(Date.now()/1e3)+60};return{checkTokenExpired:function(o,r){if(o!=="/app/info"&&o!=="/user/login"&&o!=="/user/oauth"&&s(r)){if(o!=="/access-token")throw Error("token_expired");return}}}};function pt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function Ce(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){pt(n,t,e,a,c,"next",l)}function c(l){pt(n,t,e,a,c,"throw",l)}a(void 0)})}}function yt(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Vt(s,o,r){return(Vt=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,e,n){var a=(function(l,b){for(;!Object.prototype.hasOwnProperty.call(l,b)&&(l=ke(l))!==null;);return l})(t,e);if(a){var c=Object.getOwnPropertyDescriptor(a,e);return c.get?c.get.call(n||t):c.value}})(s,o,r||s)}function ke(s){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(s)}function Xt(s,o){return(Xt=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(s,o)}function zt(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zt=function(){return!!s})()}function Ae(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Ir=(function(s){var o;function r(t,e){var n,a,c,l;return(function(b,i){if(!(b instanceof i))throw TypeError("Cannot call a class as a function")})(this,r),a=ke(a=r),yt(n=(l=zt()?Reflect.construct(a,[],ke(this).constructor):a.apply(this,c))&&((l&&typeof Symbol<"u"&&l.constructor===Symbol?"symbol":typeof l)=="object"||typeof l=="function")?l:(function(b){if(b===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return b})(this),"baseUrl",void 0),yt(n,"params",void 0),n.baseUrl=t,n.params=e,n.addListener(Ie.request,n.requestCallback),n.addListener(Ie.response,n.responseCallback),n}return(function(t,e){if(typeof e!="function"&&e!==null)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)})(r,s),o=[{key:"send",value:function(t,e){var n=this,a=this;return Ce(function(){var c,l,b,i,_;return Ae(this,function(j){switch(j.label){case 0:return[4,a.emitAsync(Ie.request,t,e||{})];case 1:return j.sent(),c=t.data,l=t.url,b=t.headers,i=(function(){var N;if((N=FormData)!=null&&typeof Symbol<"u"&&N[Symbol.hasInstance]?N[Symbol.hasInstance](c):c instanceof N)return{}})(),t.headers=Object.assign(b||{},i),[4,Vt(ke(r.prototype),"send",n).call(a,t,e)];case 2:return _=j.sent(),[4,a.setToken(l,_)];case 3:return j.sent(),[4,a.emitAsync(Ie.response,_,e||{})];case 4:return j.sent(),[2,_]}})})()}},{key:"setToken",value:function(t,e){var n=this;return Ce(function(){var a,c,l,b,i,_;return Ae(this,function(j){switch(j.label){case 0:return Er(e.data)?[3,7]:t==="user/login"&&(!((a=e.data)===null||a===void 0)&&a.token)?[4,n.params.wepinFetch.setToken({accessToken:(l=e.data)===null||l===void 0?void 0:l.token.access,refreshToken:(b=e.data)===null||b===void 0?void 0:b.token.refresh})]:[3,2];case 1:case 4:return j.sent(),[3,7];case 2:return t==="/user/access-token"&&(!((c=e.data)===null||c===void 0)&&c.token)?[4,n.params.wepinFetch.Token()]:[3,5];case 3:return _=j.sent(),[4,n.params.wepinFetch.setToken({accessToken:(i=e.data)===null||i===void 0?void 0:i.token,refreshToken:_?.refreshToken})];case 5:return t!=="user/logout"?[3,7]:[4,n.params.wepinFetch.setToken()];case 6:j.sent(),j.label=7;case 7:return[2]}})})()}},{key:"requestCallback",value:function(t,e){var n=this;return Ce(function(){var a,c,l,b,i;return Ae(this,function(_){switch(_.label){case 0:return _.trys.push([0,6,,7]),t.headers||(t.headers={}),t.headers["X-API-KEY"]=n.params.appKey,a=n.params.domain&&n.params.domain.includes("localhost")?"":n.params.domain,t.headers["X-SDK-TYPE"]=n.params.sdk.type,t.headers["X-SDK-VERSION"]=n.params.sdk.version,t.headers["X-API-DOMAIN"]=a,[4,n.params.wepinFetch.Token()];case 1:if(c=_.sent(),t.url==="/user/access-token"&&Object.assign(t.query,{refresh_token:c?.refreshToken}),e?.ignoreCheckToken)return[2];_.label=2;case 2:return _.trys.push([2,3,,5]),l=c?.accessToken,(0,Lr().checkTokenExpired)(t.url,l),[3,5];case 3:return _.sent(),b=new K({url:"/user/access-token",method:"GET",withCredentials:!0}),[4,n.send(b,{ignoreCheckToken:!0})];case 4:return _.sent(),[3,5];case 5:return(i=c?.accessToken)&&(t.headers.Authorization="Bearer ".concat(i)),[3,7];case 6:throw _.sent(),Error("Unauthorized Error");case 7:return[2]}})})()}},{key:"responseCallback",value:function(t){return Ce(function(){return Ae(this,function(e){if(t.status===401)throw Error("Unauthorized Error");return[2]})})()}}],(function(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}})(r.prototype,o),r})(Qt);function wt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function mt(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){wt(n,t,e,a,c,"next",l)}function c(l){wt(n,t,e,a,c,"throw",l)}a(void 0)})}}function gt(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function _t(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Cr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),gt(this,"fetcher",void 0),gt(this,"basePath",void 0),this.fetcher=r,this.basePath="/account"}return s=[{key:"readdress",value:function(r){var t=this;return mt(function(){var e;return _t(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/readdress"),data:r,method:"PATCH",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"getAppAccountList",value:function(r){var t=this;return mt(function(){var e;return _t(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath),query:r,method:"GET",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function kt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function pe(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){kt(n,t,e,a,c,"next",l)}function c(l){kt(n,t,e,a,c,"throw",l)}a(void 0)})}}function Et(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function ye(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Ar=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),Et(this,"fetcher",void 0),Et(this,"basePath",void 0),this.fetcher=r,this.basePath="/app"}return s=[{key:"getThemeById",value:function(r){var t=this;return pe(function(){return ye(this,function(e){switch(e.label){case 0:return[4,fetch("".concat(t.fetcher.baseUrl,"/app/theme/").concat(r.id),{method:"GET"})];case 1:return[2,e.sent().json()]}})})()}},{key:"getLayoutById",value:function(r){var t=this;return pe(function(){return ye(this,function(e){switch(e.label){case 0:return[4,fetch("".concat(t.fetcher.baseUrl,"/app/layout/").concat(r.id),{method:"GET"})];case 1:return[2,e.sent().json()]}})})()}},{key:"getAppInfo",value:function(r){var t=this;return pe(function(){var e;return ye(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/info"),query:r,method:"GET",withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"getAppCoins",value:function(r){var t=this;return pe(function(){var e;return ye(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/coins"),method:"GET",query:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"getAppTheme",value:function(){var r=this;return pe(function(){var t;return ye(this,function(e){switch(e.label){case 0:return t=new K({url:"".concat(r.basePath,"/theme"),method:"GET",withCredentials:!0}),[4,r.fetcher.send(t,{ignoreCheckToken:!0})];case 1:return[2,e.sent().data]}})})()}},{key:"register",value:function(r){var t=this;return pe(function(){var e;return ye(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/register"),method:"POST",data:r,withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function Tt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function Pt(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}var jr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),Pt(this,"fetcher",void 0),Pt(this,"basePath",void 0),this.fetcher=r,this.basePath="/accountbalance"}return s=[{key:"getAccountBalance",value:function(r){var t,e=this;return(t=function(){var n;return(function(a,c){var l,b,i,_,j={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return _={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function N(B){return function(R){return(function(U){if(l)throw TypeError("Generator is already executing.");for(;j;)try{if(l=1,b&&(i=2&U[0]?b.return:U[0]?b.throw||((i=b.return)&&i.call(b),0):b.next)&&!(i=i.call(b,U[1])).done)return i;switch(b=0,i&&(U=[2&U[0],i.value]),U[0]){case 0:case 1:i=U;break;case 4:return j.label++,{value:U[1],done:!1};case 5:j.label++,b=U[1],U=[0];continue;case 7:U=j.ops.pop(),j.trys.pop();continue;default:if(!(i=(i=j.trys).length>0&&i[i.length-1])&&(U[0]===6||U[0]===2)){j=0;continue}if(U[0]===3&&(!i||U[1]>i[0]&&U[1]<i[3])){j.label=U[1];break}if(U[0]===6&&j.label<i[1]){j.label=i[1],i=U;break}if(i&&j.label<i[2]){j.label=i[2],j.ops.push(U);break}i[2]&&j.ops.pop(),j.trys.pop();continue}U=c.call(a,j)}catch(J){U=[6,J],b=0}finally{l=i=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}})([B,R])}}})(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/").concat(r.accountId,"/balance"),method:"GET",withCredentials:!0}),[4,e.fetcher.send(n)];case 1:return[2,a.sent().data]}})},function(){var n=this,a=arguments;return new Promise(function(c,l){var b=t.apply(n,a);function i(j){Tt(b,c,l,i,_,"next",j)}function _(j){Tt(b,c,l,i,_,"throw",j)}i(void 0)})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function Ot(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function He(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){Ot(n,t,e,a,c,"next",l)}function c(l){Ot(n,t,e,a,c,"throw",l)}a(void 0)})}}function Lt(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Je(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Sr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),Lt(this,"fetcher",void 0),Lt(this,"basePath",void 0),this.fetcher=r,this.basePath="/nft"}return s=[{key:"getSupportingNetworkList",value:function(){var r=this;return He(function(){var t;return Je(this,function(e){switch(e.label){case 0:return t=new K({url:"".concat(r.basePath,"/support-network"),method:"GET",withCredentials:!0}),[4,r.fetcher.send(t,{})];case 1:return[2,e.sent().data]}})})()}},{key:"getAppNFTList",value:function(r){var t=this;return He(function(){var e;return Je(this,function(n){switch(n.label){case 0:return e=new K({url:t.basePath,method:"GET",query:r,withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"refreshAppNFTList",value:function(r){var t=this;return He(function(){var e;return Je(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/refresh"),method:"GET",query:r,withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function It(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function je(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){It(n,t,e,a,c,"next",l)}function c(l){It(n,t,e,a,c,"throw",l)}a(void 0)})}}function Ct(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Se(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Fr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),Ct(this,"fetcher",void 0),Ct(this,"basePath",void 0),this.fetcher=r,this.basePath="/tx"}return s=[{key:"sign",value:function(r){var t=this;return je(function(){var e;return Se(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/sign"),data:r,method:"POST",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"broadCast",value:function(r){var t=this;return je(function(){var e;return Se(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/broadcast"),data:r,method:"POST",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"prepareTransaction",value:function(r){var t=this;return je(function(){var e;return Se(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/prepare"),data:r,method:"POST",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"checkAddressValidation",value:function(r){var t=this;return je(function(){var e;return Se(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/check_address"),query:r,method:"GET",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function At(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function V(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){At(n,t,e,a,c,"next",l)}function c(l){At(n,t,e,a,c,"throw",l)}a(void 0)})}}function jt(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function X(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Nr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),jt(this,"fetcher",void 0),jt(this,"basePath",void 0),this.fetcher=r,this.basePath="/user"}return s=[{key:"checkEmailExist",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/check-user"),method:"GET",query:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"getUserPasswordState",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/password-state"),method:"GET",query:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"oAuth",value:function(r,t){var e=this;return V(function(){var n;return X(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/oauth/login/").concat(t.provider),method:"GET",query:r,withCredentials:!0}),[4,e.fetcher.send(n,{ignoreCheckToken:!0})];case 1:return[2,a.sent().data]}})})()}},{key:"verify",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/verify"),method:"POST",data:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"login",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/login"),method:"POST",data:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"updateUserPasswordState",value:function(r,t){var e=this;return V(function(){var n;return X(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/").concat(r.userId,"/password-state"),method:"PATCH",data:t,withCredentials:!0}),[4,e.fetcher.send(n)];case 1:return[2,a.sent().data]}})})()}},{key:"updateTermsAccepted",value:function(r,t){var e=this;return V(function(){var n;return X(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/").concat(r.userId,"/terms-accepted"),method:"PATCH",data:t,withCredentials:!0}),[4,e.fetcher.send(n)];case 1:return[2,a.sent().data]}})})()}},{key:"refreshToken",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/access-token"),method:"GET",query:{userId:r.userId},withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"fetchKey",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/pubkey"),method:"GET",query:{userId:r.userId},withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"getTermsAccepted",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/").concat(r.userId,"/terms-accepted"),method:"GET",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"logout",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/").concat(r.userId,"/logout"),method:"POST",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"getFirebaseConfig",value:function(){var r=this;return V(function(){var t;return X(this,function(e){switch(e.label){case 0:return t=new K({url:"".concat(r.basePath,"/firebase-config"),method:"GET",withCredentials:!0}),[4,r.fetcher.send(t,{ignoreCheckToken:!0})];case 1:return[2,e.sent().data]}})})()}},{key:"loginOAuthIdToken",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/oauth/login/id-token"),method:"POST",data:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"loginOAuthAccessToken",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/oauth/login/access-token"),method:"POST",data:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:return[2,n.sent().data]}})})()}},{key:"OAuthVerifyEmail",value:function(r){var t=this;return V(function(){var e,n;return X(this,function(a){switch(a.label){case 0:return e=new K({url:"".concat(t.basePath,"/oauth/verify-email"),method:"POST",data:r,withCredentials:!0}),[4,t.fetcher.send(e,{ignoreCheckToken:!0})];case 1:if(Math.floor((n=a.sent()).status/100)!=2)throw Error("OAuthVerifyEmail failed with status ".concat(n.status));return[2,n.data]}})})()}},{key:"OAuthTokenRequest",value:function(r,t){var e=this;return V(function(){var n;return X(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/oauth/token/").concat(r.provider),method:"POST",data:t,withCredentials:!0}),[4,e.fetcher.send(n,{ignoreCheckToken:!0})];case 1:return[2,a.sent().data]}})})()}},{key:"getUserInfo",value:function(r){var t=this;return V(function(){var e;return X(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/").concat(r.userId,"/detail"),method:"GET",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function St(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function me(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){St(n,t,e,a,c,"next",l)}function c(l){St(n,t,e,a,c,"throw",l)}a(void 0)})}}function Ft(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function ge(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Rr=(function(){var s;function o(r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,o),Ft(this,"fetcher",void 0),Ft(this,"basePath",void 0),this.fetcher=r,this.basePath="/wallet"}return s=[{key:"verifyPin",value:function(r){var t=this;return me(function(){var e;return ge(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/pin/verify"),data:r,method:"POST",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"changePin",value:function(r){var t=this;return me(function(){var e;return ge(this,function(n){switch(n.label){case 0:return e=new K({url:"".concat(t.basePath,"/pin/change"),data:r,method:"PATCH",withCredentials:!0}),[4,t.fetcher.send(e)];case 1:return[2,n.sent().data]}})})()}},{key:"fetchWalletInfo",value:function(r,t){var e=this;return me(function(){var n;return ge(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/").concat(r.walletId),query:t,method:"GET",withCredentials:!0}),[4,e.fetcher.send(n)];case 1:return[2,a.sent().data]}})})()}},{key:"getWalletKeyInfo",value:function(r,t){var e=this;return me(function(){var n;return ge(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/").concat(r.walletId,"/wallet-keyinfo"),query:t,method:"GET",withCredentials:!0}),[4,e.fetcher.send(n)];case 1:return[2,a.sent().data]}})})()}},{key:"resetPinTryCount",value:function(r,t){var e=this;return me(function(){var n;return ge(this,function(a){switch(a.label){case 0:return n=new K({url:"".concat(e.basePath,"/").concat(r.walletId,"/pin/reset-try-count"),query:t,method:"GET",withCredentials:!0}),[4,e.fetcher.send(n)];case 1:return[2,a.sent().data]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();function de(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Zt(s,o){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,Zt),de(this,"app",void 0),de(this,"user",void 0),de(this,"wallet",void 0),de(this,"account",void 0),de(this,"balance",void 0),de(this,"nft",void 0),de(this,"transaction",void 0);var r=new Ir(s,o);this.app=new Ar(r),this.user=new Nr(r),this.wallet=new Rr(r),this.account=new Cr(r),this.balance=new jr(r),this.nft=new Sr(r),this.transaction=new Fr(r)}var $r="0.0.35";function Nt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function Fe(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){Nt(n,t,e,a,c,"next",l)}function c(l){Nt(n,t,e,a,c,"throw",l)}a(void 0)})}}function Rt(s,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function te(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Ne(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Dr=(function(){var s,o;function r(t){var e=t.appId,n=t.appKey,a=t.domain,c=t.sdk,l=t.storage;(function(b,i){if(!(b instanceof i))throw TypeError("Cannot call a class as a function")})(this,r),te(this,"version",void 0),te(this,"appId",void 0),te(this,"sdk",void 0),te(this,"_appKey",void 0),te(this,"_isInitialized",void 0),te(this,"_token",void 0),te(this,"_domain",void 0),te(this,"_wepinStorage",void 0),te(this,"wepinApi",void 0),te(this,"wepinFirebaseApi",void 0),this.version=$r,this.appId=e,this._appKey=n,this._domain=a,this._token=void 0,this.sdk=c,this._wepinStorage=l??new dr}return s=[{key:"init",value:function(){var t=this;return Fe(function(){var e;return Ne(this,function(n){switch(n.label){case 0:return[4,r.getFirebaseConfig(t._appKey,t.sdk.type,t.sdk.version)];case 1:return e=n.sent(),t.wepinFirebaseApi=new kr(e),t.wepinApi=new Zt(it(ot(t._appKey)).sdkBackend,{appId:t.appId,appKey:t._appKey,domain:t._domain,sdk:t.sdk,wepinFetch:t}),t._isInitialized=!0,[2]}})})()}},{key:"isInitialized",value:function(){return this._isInitialized}},{key:"Token",value:function(){var t=this;return Fe(function(){return Ne(this,function(e){switch(e.label){case 0:return[4,t._wepinStorage.getLocalStorage(t.appId,"wepin:connectUser")];case 1:return t._token=e.sent(),[2,t._token]}})})()}},{key:"setToken",value:function(t){var e=this;return Fe(function(){return Ne(this,function(n){switch(n.label){case 0:return e._token=t,t?[4,e._wepinStorage.setLocalStorage(e.appId,"wepin:connectUser",t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e._wepinStorage.clearLocalStorage(e.appId,"wepin:connectUser")];case 3:n.sent(),n.label=4;case 4:return[2]}})})()}}],o=[{key:"getFirebaseConfig",value:function(t,e,n){return Fe(function(){var a;return Ne(this,function(c){switch(c.label){case 0:return a=it(ot(t)).sdkBackend,[4,fetch("".concat(a,"/user/firebase-config"),{method:"GET",headers:{"X-API-KEY":t,"X-SDK-TYPE":e,"X-SDK-VERSION":n,"Content-Type":"application/json"}})];case 1:return[4,c.sent().text()];case 2:return[2,JSON.parse(atob(c.sent()))]}})})()}}],s&&Rt(r.prototype,s),o&&Rt(r,o),r})(),he,be;(he={})[he.Activated=1]="Activated",he[he.Deactivated=2]="Deactivated",he[he.Recovered=3]="Recovered";var Hr=((be={})[be.web=1]="web",be[be.android=2]="android",be[be.ios=3]="ios",be),Ur="0.0.35";function $t(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function Ut(s,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function oe(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}var ee=(function(){var s,o;function r(t,e,n,a,c){(function(l,b){if(!(l instanceof b))throw TypeError("Cannot call a class as a function")})(this,r),oe(this,"id",void 0),oe(this,"url",void 0),oe(this,"type",void 0),oe(this,"isHide",void 0),oe(this,"isWidgetReady",!1),oe(this,"EL",void 0),oe(this,"_open",void 0),this.url=t,this.id="id-".concat(cr()),this.isHide=c,r._webview[this.id]=e,this.type=n,this.EL=a,window.addEventListener("message",this.EL),this._open=!0}return s=[{key:"isOpen",get:function(){return this._open}},{key:"close",value:function(){var t,e=this;return(t=function(){return(function(n,a){var c,l,b,i,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return i={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function j(N){return function(B){return(function(R){if(c)throw TypeError("Generator is already executing.");for(;_;)try{if(c=1,l&&(b=2&R[0]?l.return:R[0]?l.throw||((b=l.return)&&b.call(l),0):l.next)&&!(b=b.call(l,R[1])).done)return b;switch(l=0,b&&(R=[2&R[0],b.value]),R[0]){case 0:case 1:b=R;break;case 4:return _.label++,{value:R[1],done:!1};case 5:_.label++,l=R[1],R=[0];continue;case 7:R=_.ops.pop(),_.trys.pop();continue;default:if(!(b=(b=_.trys).length>0&&b[b.length-1])&&(R[0]===6||R[0]===2)){_=0;continue}if(R[0]===3&&(!b||R[1]>b[0]&&R[1]<b[3])){_.label=R[1];break}if(R[0]===6&&_.label<b[1]){_.label=b[1],b=R;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(R);break}b[2]&&_.ops.pop(),_.trys.pop();continue}R=a.call(n,_)}catch(U){R=[6,U],l=0}finally{c=b=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}})([N,B])}}})(this,function(n){switch(n.label){case 0:return window.removeEventListener("message",e.EL),e._open=!1,e.isWidgetReady=!1,[4,e._closeWebview()];case 1:return n.sent(),[2]}})},function(){var n=this,a=arguments;return new Promise(function(c,l){var b=t.apply(n,a);function i(j){$t(b,c,l,i,_,"next",j)}function _(j){$t(b,c,l,i,_,"throw",j)}i(void 0)})})()}},{key:"response",value:function(t){try{this._post(t)}catch(e){console.error("Can not response message to the webview",e)}}},{key:"request",value:function(t){try{this._post(t)}catch(e){console.error("Can not send message to the webview",e)}}}],o=[{key:"getWebview",value:function(t){return r._webview[t]}},{key:"clearWebview",value:function(t){delete r._webview[t]}},{key:"clearAllWebview",value:function(){this._webview={}}}],s&&Ut(r.prototype,s),o&&Ut(r,o),r})();oe(ee,"_webview",{});var Wr=function(s){var o=s?.width||375,r=s?.height||604,t=s?.sLeft?s?.sLeft:window.screenLeft?window.screenLeft:window.screenX?window.screenX:0,e=s?.sTop?s?.sTop:window.screenTop?window.screenTop:window.screenY?window.screenY:0,n=screen.width/2-o/2+t,a=screen.height/2-r/2+e;return"width=".concat(o,", height=").concat(r,", left=").concat(n,", top=").concat(a)+"scrollbars=yes, resizable=1, menubar=no, toolbar=no"},qr=function(s){var o=document.createElement("iframe");return o.classList.add("wepin-sdk-widget-iframe"),o.setAttribute("frameborder","0"),o.setAttribute("marginwidth","0"),o.setAttribute("marginheight","0"),o.style.width="100%",s&&s?.isHide?o.style.height="0":o.style.height="100%",o.style.maxHeight="100%",o.style.position="fixed",o.style.bottom="0",o.style.left="0",o.style.zIndex="408888000000",o.title="wepin sdk webview",o.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; camera; clipboard-read",o.allowFullscreen=!0,o.style.colorScheme="light",o.style.background="rgba(0, 0, 0, 0.6)",o},Ye,Qe;function Wt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function qt(s,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function tt(s){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(s)}function er(s,o){return(er=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(s,o)}function tr(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tr=function(){return!!s})()}typeof window<"u"&&(window.__WEPIN_ORIGINAL_PAGE_INFO__=window.__WEPIN_ORIGINAL_PAGE_INFO__||null,window.__WEPIN_FRAME_QUEUE__=window.__WEPIN_FRAME_QUEUE__||[]);var qe=(function(s){var o,r;function t(e){var n,a,c,l,b=e.url,i=e.frame,_=e.EL,j=e.isHide;return(function(N,B){if(!(N instanceof B))throw TypeError("Cannot call a class as a function")})(this,t),a=t,c=[b,i,"Frame",_,j],a=tt(a),l=(n=tr()?Reflect.construct(a,c||[],tt(this).constructor):a.apply(this,c))&&((n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n)=="object"||typeof n=="function")?n:(function(N){if(N===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return N})(this),i.src=b,i.id=l.id,t.validateQueue(),window.__WEPIN_FRAME_QUEUE__.push(l.id),l.setParentStyle(),document.body.appendChild(i),window.scrollTo({top:t.scrollPosition}),l}return(function(e,n){if(typeof n!="function"&&n!==null)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&er(e,n)})(t,s),o=[{key:"setParentStyle",value:function(){var e=document.querySelector("head"),n=document.querySelector("body");t.scrollPosition=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;var a=document.querySelector('meta[name="viewport"]');window.__WEPIN_ORIGINAL_PAGE_INFO__===null&&(window.__WEPIN_ORIGINAL_PAGE_INFO__={metaContent:a?.getAttribute("content"),bodyOverflow:n.style.overflow}),n.style.overflow="hidden";var c=document.createElement("meta");c.name="viewport",c.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",a?a.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"):((a=document.createElement("meta")).name="viewport",a.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",e.appendChild(a)),e.appendChild(c)}},{key:"recoverParentStyle",value:function(){t.validateQueue();var e=window.__WEPIN_FRAME_QUEUE__.indexOf(this.id);if(e!==-1&&window.__WEPIN_FRAME_QUEUE__.splice(e,1),window.__WEPIN_FRAME_QUEUE__.length===0){document.querySelector("body").style.overflow=(c=(n=window.__WEPIN_ORIGINAL_PAGE_INFO__)===null||n===void 0?void 0:n.bodyOverflow)!==null&&c!==void 0?c:"";var n,a,c,l=document.querySelector('meta[name="viewport"]');!((a=window.__WEPIN_ORIGINAL_PAGE_INFO__)===null||a===void 0)&&a.metaContent?l.setAttribute("content",window.__WEPIN_ORIGINAL_PAGE_INFO__.metaContent):l.remove(),window.__WEPIN_ORIGINAL_PAGE_INFO__=null}}},{key:"expand",value:function(){var e=ee.getWebview(this.id);e.style.height="100%",e.style.borderRadius="0"}},{key:"shrink",value:function(){var e=ee.getWebview(this.id);e.style.height="604px",e.style.borderRadius="12px 12px 0 0 "}},{key:"_closeWebview",value:function(){var e=this;return new Promise(function(n){var a=setTimeout(function(){var c=ee.getWebview(e.id);e.recoverParentStyle(),c&&document.body.removeChild(c),ee.clearWebview(e.id),clearTimeout(a),n()},500)})}},{key:"_post",value:function(e){ee.getWebview(this.id).contentWindow.postMessage(e,this.url)}}],r=[{key:"validateQueue",value:function(){if(window.__WEPIN_FRAME_QUEUE__&&(window.__WEPIN_FRAME_QUEUE__=window.__WEPIN_FRAME_QUEUE__.filter(function(a){var c=document.getElementById(a);return c!==null&&c.tagName==="IFRAME"}),window.__WEPIN_FRAME_QUEUE__.length===0&&window.__WEPIN_ORIGINAL_PAGE_INFO__)){document.querySelector("body").style.overflow=(e=window.__WEPIN_ORIGINAL_PAGE_INFO__.bodyOverflow)!==null&&e!==void 0?e:"";var e,n=document.querySelector('meta[name="viewport"]');window.__WEPIN_ORIGINAL_PAGE_INFO__.metaContent?n.setAttribute("content",window.__WEPIN_ORIGINAL_PAGE_INFO__.metaContent):n?.remove(),window.__WEPIN_ORIGINAL_PAGE_INFO__=null}}},{key:"openNew",value:function(e){var n,a=e.url,c=e.EL,l=e.widgetOptions;return(n=function(){return(function(b,i){var _,j,N,B,R={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return B={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function U(J){return function(M){return(function(q){if(_)throw TypeError("Generator is already executing.");for(;R;)try{if(_=1,j&&(N=2&q[0]?j.return:q[0]?j.throw||((N=j.return)&&N.call(j),0):j.next)&&!(N=N.call(j,q[1])).done)return N;switch(j=0,N&&(q=[2&q[0],N.value]),q[0]){case 0:case 1:N=q;break;case 4:return R.label++,{value:q[1],done:!1};case 5:R.label++,j=q[1],q=[0];continue;case 7:q=R.ops.pop(),R.trys.pop();continue;default:if(!(N=(N=R.trys).length>0&&N[N.length-1])&&(q[0]===6||q[0]===2)){R=0;continue}if(q[0]===3&&(!N||q[1]>N[0]&&q[1]<N[3])){R.label=q[1];break}if(q[0]===6&&R.label<N[1]){R.label=N[1],N=q;break}if(N&&R.label<N[2]){R.label=N[2],R.ops.push(q);break}N[2]&&R.ops.pop(),R.trys.pop();continue}q=i.call(b,R)}catch(T){q=[6,T],j=0}finally{_=N=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}})([J,M])}}})(this,function(b){return[2,new t({url:a,frame:qr({isHide:l?.isHide}),EL:c,isHide:l?.isHide})]})},function(){var b=this,i=arguments;return new Promise(function(_,j){var N=n.apply(b,i);function B(U){Wt(N,_,j,B,R,"next",U)}function R(U){Wt(N,_,j,B,R,"throw",U)}B(void 0)})})()}}],o&&qt(t.prototype,o),r&&qt(t,r),t})(ee);Qe=void 0,(Ye="scrollPosition")in qe?Object.defineProperty(qe,Ye,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):qe[Ye]=Qe;var Ve,Xe,Ee=(function(){function s(){(function(o,r){if(!(o instanceof r))throw TypeError("Cannot call a class as a function")})(this,s)}return(function(o,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}})(s,[{key:"closeOverlay",value:function(o){var r=document.querySelector("#".concat(o));r&&r.parentNode&&r.parentNode.removeChild(r)}},{key:"openOverlay",value:function(o){var r=document.createElement("div");r.id=o,r.classList.add(this.CONST.overlayClassName),r.style.zIndex="2147483647",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.textAlign="center",r.style.position="fixed",r.style.left="0px",r.style.right="0px",r.style.top="0px",r.style.bottom="0px",r.style.left="0px",r.style.background="rgba(0,0,0,0.6)";for(var t=document.getElementsByClassName(this.CONST.overlayClassName),e=0;e<t.length;e++){var n=t.item(e);n&&n.remove()}document.body.appendChild(r)}}]),s})();Xe={overlayClassName:"wepin-widget__overlay"},(Ve="CONST")in Ee?Object.defineProperty(Ee,Ve,{value:Xe,enumerable:!0,configurable:!0,writable:!0}):Ee[Ve]=Xe;var ze,Ze;function Gt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function Mt(s,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function rt(s){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(s)}function rr(s,o){return(rr=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(s,o)}function nr(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nr=function(){return!!s})()}var Ge=(function(s){var o,r;function t(e){var n,a,c,l=e.url,b=e.webview,i=e.EL;return(function(_,j){if(!(_ instanceof j))throw TypeError("Cannot call a class as a function")})(this,t),a=t,c=[l,b,"Window",i,!1],a=rt(a),(n=nr()?Reflect.construct(a,c||[],rt(this).constructor):a.apply(this,c))&&((n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n)=="object"||typeof n=="function")?n:(function(_){if(_===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return _})(this)}return(function(e,n){if(typeof n!="function"&&n!==null)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&rr(e,n)})(t,s),o=[{key:"expand",value:function(){}},{key:"shrink",value:function(){}},{key:"_closeWebview",value:function(){Ee.closeOverlay(this.id),t.timer&&(clearInterval(t.timer),t.timer=void 0);var e=ee.getWebview(this.id);return e&&e.close(),ee.clearWebview(this.id),Promise.resolve()}},{key:"_post",value:function(e){ee.getWebview(this.id).postMessage(e,this.url)}}],r=[{key:"openNew",value:function(e){var n,a=e.url,c=e.EL,l=e.widgetFeatures,b=this;return(n=function(){var i,_,j,N;return(function(B,R){var U,J,M,q,T={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return q={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function P(L){return function(A){return(function(F){if(U)throw TypeError("Generator is already executing.");for(;T;)try{if(U=1,J&&(M=2&F[0]?J.return:F[0]?J.throw||((M=J.return)&&M.call(J),0):J.next)&&!(M=M.call(J,F[1])).done)return M;switch(J=0,M&&(F=[2&F[0],M.value]),F[0]){case 0:case 1:M=F;break;case 4:return T.label++,{value:F[1],done:!1};case 5:T.label++,J=F[1],F=[0];continue;case 7:F=T.ops.pop(),T.trys.pop();continue;default:if(!(M=(M=T.trys).length>0&&M[M.length-1])&&(F[0]===6||F[0]===2)){T=0;continue}if(F[0]===3&&(!M||F[1]>M[0]&&F[1]<M[3])){T.label=F[1];break}if(F[0]===6&&T.label<M[1]){T.label=M[1],M=F;break}if(M&&T.label<M[2]){T.label=M[2],T.ops.push(F);break}M[2]&&T.ops.pop(),T.trys.pop();continue}F=R.call(B,T)}catch($){F=[6,$],J=0}finally{U=M=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}})([L,A])}}})(this,function(B){if(i=Wr(l),_="Wepin_Widget",j=window.open(a,_,i),N=new t({url:a,webview:j,EL:c}),!j)throw N.close(),Error("popup window blocked");return Ee.openOverlay(N.id),b.timer=setInterval(function(){try{j&&j.closed&&(clearInterval(b.timer),N.close())}catch{clearInterval(b.timer),N.close()}},200),[2,N]})},function(){var i=this,_=arguments;return new Promise(function(j,N){var B=n.apply(i,_);function R(J){Gt(B,j,N,R,U,"next",J)}function U(J){Gt(B,j,N,R,U,"throw",J)}R(void 0)})})()}}],o&&Mt(t.prototype,o),r&&Mt(t,r),t})(ee);Ze=void 0,(ze="timer")in Ge?Object.defineProperty(Ge,ze,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Ge[ze]=Ze;function Bt(s,o,r,t,e,n,a){try{var c=s[n](a),l=c.value}catch(b){r(b);return}c.done?o(l):Promise.resolve(l).then(t,e)}function Re(s){return function(){var o=this,r=arguments;return new Promise(function(t,e){var n=s.apply(o,r);function a(l){Bt(n,t,e,a,c,"next",l)}function c(l){Bt(n,t,e,a,c,"throw",l)}a(void 0)})}}function $e(s,o,r){return o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function Ue(s,o){var r,t,e,n,a={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function c(l){return function(b){return(function(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,t&&(e=2&i[0]?t.return:i[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,i[1])).done)return e;switch(t=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(e=(e=a.trys).length>0&&e[e.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!e||i[1]>e[0]&&i[1]<e[3])){a.label=i[1];break}if(i[0]===6&&a.label<e[1]){a.label=e[1],e=i;break}if(e&&a.label<e[2]){a.label=e[2],a.ops.push(i);break}e[2]&&a.ops.pop(),a.trys.pop();continue}i=o.call(s,a)}catch(_){i=[6,_],t=0}finally{r=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}})([l,b])}}}var Jr=(function(){var s;function o(){(function(r,t){if(!(r instanceof t))throw TypeError("Cannot call a class as a function")})(this,o),$e(this,"platformType","web"),$e(this,"domain",void 0),$e(this,"_modalWindow",null),$e(this,"_modalFrame",null),console.log("WepinModal v".concat(Ur)),this.domain=window.location.origin}return s=[{key:"openAuthBrowser",value:function(r,t){var e=this;return Re(function(){return Ue(this,function(n){switch(n.label){case 0:return[4,Ge.openNew({url:r,EL:t})];case 1:return e._modalWindow=n.sent(),[2,e._modalWindow]}})})()}},{key:"openModal",value:function(r,t,e){var n=this;return Re(function(){return Ue(this,function(a){switch(a.label){case 0:return[4,qe.openNew({url:r,EL:t,widgetOptions:e})];case 1:return n._modalFrame=a.sent(),[2,n._modalFrame]}})})()}},{key:"closeAuthBrowser",value:function(){var r=this;return Re(function(){return Ue(this,function(t){return r._modalWindow&&r._modalWindow.close(),[2]})})()}},{key:"closeModal",value:function(){var r=this;return Re(function(){return Ue(this,function(t){switch(t.label){case 0:return r._modalFrame?[4,r._modalFrame.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})()}}],(function(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}})(o.prototype,s),o})();export{Mr as P,ur as S,Jr as W,dr as a,Kr as b,Hr as c,Dr as d,it as e,hr as f,ot as g,vr as h,Er as i,Or as j,Br as m,st as p,ir as r};
